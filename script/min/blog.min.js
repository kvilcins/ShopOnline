import{createHeader}from"./modules/header.js";import{createFooter}from"./modules/footer.js";import{Breadcrumbs}from"./modules/breadcrumbs.js";const createBlog=()=>{const t=document.createElement("main"),e=document.createElement("section");e.classList.add("previews");const n=document.createElement("div");n.classList.add("container"),n.id="previews";const i=document.createElement("nav");i.classList.add("pagination"),i.id="pagination",e.appendChild(n),t.appendChild(e),t.appendChild(i),document.body.appendChild(t);const s=t=>{const e=document.createElement("article");e.classList.add("preview");const n=document.createElement("a");n.classList.add("preview__link"),n.href=t.link;const i=document.createElement("img");i.classList.add("preview__image"),i.src=t.image,i.alt=t.title;const s=document.createElement("h2");s.classList.add("preview__title"),s.textContent=t.title;const d=document.createElement("div");d.classList.add("preview__info");const a=document.createElement("time");a.classList.add("preview__date"),a.setAttribute("datetime",`${t.date} ${t.time}`),a.textContent=`${t.date}, ${t.time}`;const o=document.createElement("div");o.classList.add("preview__views");const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width","24"),r.setAttribute("height","25"),r.setAttribute("viewBox","0 0 24 25"),r.setAttribute("fill","none"),r.setAttribute("class","preview__views-icon");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M21.257 11.462C21.731 12.082 21.731 12.919 21.257 13.538C19.764 15.487 16.182 19.5 12 19.5C7.81801 19.5 4.23601 15.487 2.74301 13.538C2.51239 13.2411 2.38721 12.8759 2.38721 12.5C2.38721 12.1241 2.51239 11.7589 2.74301 11.462C4.23601 9.513 7.81801 5.5 12 5.5C16.182 5.5 19.764 9.513 21.257 11.462V11.462Z"),c.setAttribute("stroke","#8F8F8F"),c.setAttribute("stroke-width","2"),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","M12 15.5C13.6569 15.5 15 14.1569 15 12.5C15 10.8431 13.6569 9.5 12 9.5C10.3431 9.5 9 10.8431 9 12.5C9 14.1569 10.3431 15.5 12 15.5Z"),l.setAttribute("stroke","#8F8F8F"),l.setAttribute("stroke-width","2"),l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),r.appendChild(c),r.appendChild(l);const p=document.createElement("span");p.classList.add("preview__views-count"),p.textContent=t.views,o.appendChild(r),o.appendChild(p);const m=document.createElement("div");m.classList.add("preview__comments");const u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("width","24"),u.setAttribute("height","24"),u.setAttribute("viewBox","0 0 24 24"),u.setAttribute("fill","none"),u.setAttribute("class","preview__comments-icon");const h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttribute("clip-path","url(#clip0_1560_16)");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d","M20 2H4C2.9 2 2.01 2.9 2.01 4L2 22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM6 9H18V11H6V9ZM14 14H6V12H14V14ZM18 8H6V6H18V8Z"),w.setAttribute("fill","#8F8F8F"),h.appendChild(w),u.appendChild(h);const g=document.createElement("span");return g.classList.add("preview__comments-count"),g.textContent=t.comments,m.appendChild(u),m.appendChild(g),d.appendChild(a),d.appendChild(o),d.appendChild(m),n.appendChild(i),n.appendChild(s),n.appendChild(d),e.appendChild(n),e},d=(t,e,n)=>{const i=document.createElement("a");if(i.classList.add("pagination__button"),i.href=`blog.html?page=${t}`,"Назад"===n){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","29"),t.setAttribute("height","19"),t.setAttribute("viewBox","0 0 29 19"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M28.375 7.95833H6.52958L12.0487 2.42375L9.875 0.25L0.625 9.5L9.875 18.75L12.0487 16.5762L6.52958 11.0417H28.375V7.95833Z"),e.setAttribute("fill","#8F8F8F"),t.appendChild(e),i.appendChild(t)}else if("Вперед"===n){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","29"),t.setAttribute("height","19"),t.setAttribute("viewBox","0 0 29 19"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M0.625 7.95833H22.4704L16.9513 2.42375L19.125 0.25L28.375 9.5L19.125 18.75L16.9513 16.5763L22.4704 11.0417H0.625V7.95833Z"),e.setAttribute("fill","#8F8F8F"),t.appendChild(e),i.appendChild(t)}else i.textContent=n||t,i.classList.add("pagination__link");return t===e&&(i.classList.add("pagination__button--current"),i.href="blog.html"),null===t&&(i.classList.add("pagination__button--disabled"),i.href="#",i.addEventListener("click",(t=>t.preventDefault()))),i},a=document.getElementById("previews"),o=(document.getElementById("pagination"),(()=>{const t=new URLSearchParams(window.location.search);return parseInt(t.get("page"))||1})());fetch(`https://gorest.co.in/public-api/posts?page=${o}`).then((t=>t.json())).then((t=>{const e=t.data,n=t.meta.pagination;for(const t of e){const e=40;let n=t.title;t.title.length>e&&(n=t.title.substring(0,e)+"...");const i=Math.floor(1e3*Math.random()),d=i>1e3?(i/1e3).toFixed(1)+"K":i,o=Math.floor(100*Math.random()),r=o>1e3?(o/1e3).toFixed(1)+"K":o,c={title:n,link:`article.html?id=${t.id}`,image:"img/shoe-preview.png",date:"01 января 2022",time:"12:00",views:d,comments:r},l=s(c);a.appendChild(l)}((t,e)=>{const n=document.getElementById("pagination"),i=d(e-1,e,"Назад");n.appendChild(i);let s=e-1;1===e&&(s=e);for(let i=s;i<=s+2;i++)if(i>=1&&i<=t.pages){const t=d(i,e);n.appendChild(t)}const a=d(e+1,e,"Вперед");e>=t.pages&&(a.classList.add("pagination__button--disabled"),a.href="#",a.addEventListener("click",(t=>t.preventDefault()))),n.appendChild(a)})(n,o)}))};document.addEventListener("DOMContentLoaded",(()=>{createHeader();const t=new Breadcrumbs,e=document.querySelector("main");document.body.insertBefore(t.render(),e),createBlog(),createFooter()}));